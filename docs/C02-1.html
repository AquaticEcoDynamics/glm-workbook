<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 1: Getting Started with GLM | GLM Workbook</title>
  <meta name="description" content="The Online GLM Workbook" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 1: Getting Started with GLM | GLM Workbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The Online GLM Workbook" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 1: Getting Started with GLM | GLM Workbook" />
  
  <meta name="twitter:description" content="The Online GLM Workbook" />
  

<meta name="author" content="Matt Hipsey, Giles Knight, Casper Boon, Dan Paraska" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="GettingStarted.html"/>
<link rel="next" href="C03-1.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="https://hypothes.is/embed.js" async></script>
  


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>GLM Workbook</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html"><i class="fa fa-check"></i>Getting Started</a>
<ul>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#excel"><i class="fa fa-check"></i>Excel</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#unzipping-files"><i class="fa fa-check"></i>Unzipping files</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html"><i class="fa fa-check"></i>Module 1: Getting Started with GLM</a>
<ul>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html#C02_2"><i class="fa fa-check"></i>Module Resources</a></li>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html#C02_3"><i class="fa fa-check"></i>Setting up GLM</a></li>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html#C02_7"><i class="fa fa-check"></i>Anatomy of a Simulation</a></li>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html#C02_8"><i class="fa fa-check"></i>Exercise: Lake-scale Water &amp; Heat Balance</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="C03-1.html"><a href="C03-1.html"><i class="fa fa-check"></i>Module 2: Configuring Model Parameters</a>
<ul>
<li class="chapter" data-level="" data-path="C03-1.html"><a href="C03-1.html#C03_2"><i class="fa fa-check"></i>Getting Familiar with the .nml</a></li>
<li class="chapter" data-level="" data-path="C03-1.html"><a href="C03-1.html#C03_3"><i class="fa fa-check"></i>Exercise: Adding Output Points</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="C04-1.html"><a href="C04-1.html"><i class="fa fa-check"></i>Module 3: The Ecosystem Model</a></li>
<li class="chapter" data-level="" data-path="C05-1.html"><a href="C05-1.html"><i class="fa fa-check"></i>Module 4: Assessing Error &amp; Sensitivity</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GLM Workbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="C02_1" class="section level1 unnumbered">
<h1>Module 1: Getting Started with GLM</h1>
<div id="C02_2" class="section level3 unnumbered">
<h3>Module Resources</h3>
<p>Download the GLM files for this module by clicking the download button in the tool bar <i class="fa fa-download" aria-hidden="true"></i>.</p>
</div>
<div id="C02_3" class="section level3 unnumbered">
<h3>Setting up GLM</h3>
<div id="C02_4" class="section level4 unnumbered">
<h4>Running GLM on MacOS</h4>
<ul>
<li>Open the Terminal application on your Mac</li>
<li>Use the <code>cd</code> (change directory) command to navigate to the <em>Kinneret97</em> folder</li>
<li>In Finder, go to the macGLM folder and right-click on the glm app, select <em>Show Package Contents</em></li>
<li>Enter the Contents folder then the MacOS folder, and locate the glm executable file</li>
<li>Back in terminal, enter the file path for this executable file - you can do this by dragging/dropping the file into the terminal</li>
<li>Leave a space after the file path and type <code>--xdisp</code></li>
<li>Press Enter and the model will open</li>
</ul>
<center>
<video width="100%" height="100%" controls>
<source src="images/09-module8/video1.mp4" type="video/mp4">
</video>
</center>

<div class="rmdnote2">
Your Mac may block opening GLM the first time you run it. If this occurs, go to your Security options inside System Preferences and click ‘Open Anyway’.
</div>
</div>
<div id="C02_5" class="section level4 unnumbered">
<h4>Running GLM on Windows</h4>
<p>On Windows, the model can be run using a batch-file <code>glm.bat</code>, which you can double click from in the <em>Kinneret97</em> directory. The <code>.bat</code> file calls the GLM model from the current working directory.</p>

<div class="rmdnote2">
<p>If the model is not opening make sure you’re <strong>not</strong> working in a network directory (e.g. OneDrive) and the file path to the <code>glm.bat</code> file has <strong>zero</strong> spaces in it.</p>
</div>
<!-- #### Running GLM in RStudio {#C02_6 -} -->
<!-- If you want to use RStudio, open the R Project, then each of the R files: `Get started.R`, `Change parameters.R` and `Plot.R`. Run the lines in `Get started.R` - it will download all the R packages from the internet, as well as an old version of GLM.  -->
<!-- To get the latest version of GLM, paste the *winGLM* folder into the place where R has saved its old version of *winGLM*, for example, `H:/My Documents/R/win-library/3.4/GLMr/extbin/winGLM`. After that you can drive the model and plot everything using the other two scripts. -->
<!-- ```{block2, hint02_3, type='rmdnote2'} -->
<!-- GLM will not run on any versions of R newer than 4.0 -->
<!-- ``` -->
</div>
</div>
<div id="C02_7" class="section level3 unnumbered">
<h3>Anatomy of a Simulation</h3>
<center>
<img src="images/09-module8/picture4.jpg" width="100%" />
</center>
<p>Once the model has run, you can inspect the results. There are three ways to look at the output:</p>
<ul>
<li>Via the time-depth contour plots that appear during the run (configured via <code>plots.nml</code>)</li>
<li>Further information on the daily water and energy balance is in the output file <code>lake.csv</code></li>
<li>Time series values of selected state variables (e.g. temperature, salinity, etc…) can be requested for a specific depth (depth above bottom) – this is setup in <code>&amp;outputs</code> (eg. <code>WQ_5.csv</code>)</li>
</ul>
</div>
<div id="C02_8" class="section level3 unnumbered">
<h3>Exercise: Lake-scale Water &amp; Heat Balance</h3>
<p>The simulation in the <em>Kinneret97</em> directory is an example 40m deep, monomictic lake that is used to supply drinking water and support an active fishery.</p>
<p>Before running the model, open the file <code>glm3.nml</code> in a text editor and inspect the model setup etc. This file is the main configuration file that drives the model. The file <code>glm3.nml</code> has several key sections in it related to the model domain and parameters, the sources of boundary condition data, and details of outputs. Scan the parameters, e.g. number of layers, light extinction coefficient, mixing coefficient etc.</p>
<ol style="list-style-type: decimal">
<li>Draw a schematic picture of the lake, the relevant boundary conditions (both related to water
fluxes and energy fluxes).</li>
<li>Identify and open the boundary condition input files - these are csv files containing time-series of meteorological information, and inflow and outflow volumes. These files can be opened in Excel or a text-editor. Find where these files are called from within <code>glm3.nml</code>.</li>
<li>Plot the lake water balance – volume, water level and fluxes including inflows, outflows, rainfall and evaporation (refer to columns in <code>lake.csv</code>, and copy the appropriate data into your own excel spreadsheet).</li>
</ol>
<center>
<div class="figure"><span id="fig:pic02-4"></span>
<img src="images/09-module8/picture2.png" alt="Schematic diagram of water balance components." width="75%" />
<p class="caption">
Figure 1: Schematic diagram of water balance components.
</p>
</div>
</center>
<ol start="4" style="list-style-type: decimal">
<li>Plot the surface heat fluxes such as shortwave, longwave, sensible heat latent heat (refer to columns in <code>lake.csv</code>).</li>
</ol>
<center>
<div class="figure"><span id="fig:pic02-5"></span>
<img src="images/09-module8/picture3.png" alt="Schematic diagram of surface heat fluxes impacting lake water temperature. For a description of the heat flux terms refer to the [GLM paper](https://gmd.copernicus.org/articles/12/473/2019/)" width="75%" />
<p class="caption">
Figure 2: Schematic diagram of surface heat fluxes impacting lake water temperature. For a description of the heat flux terms refer to the <a href="https://gmd.copernicus.org/articles/12/473/2019/">GLM paper</a>
</p>
</div>
</center>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="GettingStarted.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="C03-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["GLM Module Resources.zip", "GLM Module Resources"]],
"toc": {
"collapse": "none"
},
"search": true,
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
