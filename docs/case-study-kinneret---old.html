<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Case Study: Kinneret - OLD | GLM Workbook</title>
  <meta name="description" content="The Online GLM Workbook" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Case Study: Kinneret - OLD | GLM Workbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="The Online GLM Workbook" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Case Study: Kinneret - OLD | GLM Workbook" />
  
  <meta name="twitter:description" content="The Online GLM Workbook" />
  

<meta name="author" content="Matt Hipsey, Dan Paraska, Peisheng Huang, Casper Boon, Giles Knight" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="processing-outputs.html"/>
<link rel="next" href="case-study-darwin---old.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="https://hypothes.is/embed.js" async></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>GLM Workbook</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html"><i class="fa fa-check"></i>Getting Started</a><ul>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#glm-documentation"><i class="fa fa-check"></i>GLM Documentation</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#tools-youll-need"><i class="fa fa-check"></i>Tools You’ll Need</a><ul>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#text-editor"><i class="fa fa-check"></i>Text Editor</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#excel"><i class="fa fa-check"></i>Excel</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#r"><i class="fa fa-check"></i>R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#unzipping-files"><i class="fa fa-check"></i>Unzipping files</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html"><i class="fa fa-check"></i>GLM File Structure</a><ul>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#glm-input-files"><i class="fa fa-check"></i>GLM input files</a><ul>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#glm-configuration-file-glm3.nml"><i class="fa fa-check"></i>GLM configuration file: <code>glm3.nml</code></a></li>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#glm-plot-window-file-plots.nml"><i class="fa fa-check"></i>GLM plot window file: <code>plots.nml</code></a></li>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#boundary-files"><i class="fa fa-check"></i>Boundary files</a></li>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#aed-water-quality-model-files"><i class="fa fa-check"></i>AED water quality model files</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#glm-output-files"><i class="fa fa-check"></i>GLM output files</a><ul>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#output-netcdf"><i class="fa fa-check"></i>Output Netcdf</a></li>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#general-lake-.csv"><i class="fa fa-check"></i>General lake .csv</a></li>
<li class="chapter" data-level="" data-path="glm-file-structure.html"><a href="glm-file-structure.html#depth-specific-.csv"><i class="fa fa-check"></i>Depth-specific .csv</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="running-glm.html"><a href="running-glm.html"><i class="fa fa-check"></i>Running GLM</a></li>
<li class="part"><span><b>I Exercises</b></span></li>
<li class="chapter" data-level="1" data-path="water-level-balance.html"><a href="water-level-balance.html"><i class="fa fa-check"></i><b>1</b> Water Level &amp; Balance</a></li>
<li class="chapter" data-level="2" data-path="water-heating-stratification.html"><a href="water-heating-stratification.html"><i class="fa fa-check"></i><b>2</b> Water Heating &amp; Stratification</a></li>
<li class="chapter" data-level="3" data-path="updating-initial-height-conditions.html"><a href="updating-initial-height-conditions.html"><i class="fa fa-check"></i><b>3</b> Updating Initial Height Conditions</a></li>
<li class="chapter" data-level="4" data-path="error-assessment.html"><a href="error-assessment.html"><i class="fa fa-check"></i><b>4</b> Error Assessment</a><ul>
<li class="chapter" data-level="4.1" data-path="error-assessment.html"><a href="error-assessment.html#mean-absolute-error-mae"><i class="fa fa-check"></i><b>4.1</b> Mean Absolute Error (MAE)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="add-water-qualiry-modelling.html"><a href="add-water-qualiry-modelling.html"><i class="fa fa-check"></i><b>5</b> Add Water Qualiry Modelling</a></li>
<li class="chapter" data-level="6" data-path="sensitivity-assessment.html"><a href="sensitivity-assessment.html"><i class="fa fa-check"></i><b>6</b> Sensitivity Assessment</a><ul>
<li class="chapter" data-level="6.1" data-path="sensitivity-assessment.html"><a href="sensitivity-assessment.html#sensitivity-index-si"><i class="fa fa-check"></i><b>6.1</b> Sensitivity Index (SI)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="warming-air-scenario.html"><a href="warming-air-scenario.html"><i class="fa fa-check"></i><b>7</b> Warming Air Scenario</a></li>
<li class="chapter" data-level="8" data-path="changing-morphometry.html"><a href="changing-morphometry.html"><i class="fa fa-check"></i><b>8</b> Changing Morphometry</a></li>
<li class="part"><span><b>II Case Studies</b></span></li>
<li class="chapter" data-level="" data-path="warm-lake.html"><a href="warm-lake.html"><i class="fa fa-check"></i>Warm Lake</a></li>
<li class="chapter" data-level="" data-path="cool-lake.html"><a href="cool-lake.html"><i class="fa fa-check"></i>Cool Lake</a></li>
<li class="chapter" data-level="" data-path="tropical-reservoir.html"><a href="tropical-reservoir.html"><i class="fa fa-check"></i>Tropical Reservoir</a></li>
<li class="part"><span><b>III Old Stuff</b></span></li>
<li class="chapter" data-level="" data-path="processing-outputs.html"><a href="processing-outputs.html"><i class="fa fa-check"></i>Processing Outputs - OLD</a><ul>
<li class="chapter" data-level="" data-path="processing-outputs.html"><a href="processing-outputs.html#visualising-results"><i class="fa fa-check"></i>Visualising Results</a><ul>
<li class="chapter" data-level="" data-path="processing-outputs.html"><a href="processing-outputs.html#excel-1"><i class="fa fa-check"></i>Excel</a></li>
<li class="chapter" data-level="" data-path="processing-outputs.html"><a href="processing-outputs.html#r-1"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="processing-outputs.html"><a href="processing-outputs.html#WaterBalance"><i class="fa fa-check"></i>Water balance</a></li>
<li class="chapter" data-level="" data-path="processing-outputs.html"><a href="processing-outputs.html#heat-balance"><i class="fa fa-check"></i>Heat balance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="case-study-kinneret---old.html"><a href="case-study-kinneret---old.html"><i class="fa fa-check"></i>Case Study: Kinneret - OLD</a><ul>
<li class="chapter" data-level="" data-path="case-study-kinneret---old.html"><a href="case-study-kinneret---old.html#about"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="case-study-kinneret---old.html"><a href="case-study-kinneret---old.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="" data-path="case-study-kinneret---old.html"><a href="case-study-kinneret---old.html#error-assessment-1"><i class="fa fa-check"></i>Error Assessment</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="case-study-darwin---old.html"><a href="case-study-darwin---old.html"><i class="fa fa-check"></i>Case Study: Darwin - OLD</a><ul>
<li class="chapter" data-level="" data-path="case-study-darwin---old.html"><a href="case-study-darwin---old.html#about-1"><i class="fa fa-check"></i>About</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="other-simulations---old.html"><a href="other-simulations---old.html"><i class="fa fa-check"></i>Other Simulations - OLD</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GLM Workbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="case-study-kinneret---old" class="section level1 unnumbered hasAnchor">
<h1>Case Study: Kinneret - OLD<a href="case-study-kinneret---old.html#case-study-kinneret---old" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="about" class="section level2 unnumbered hasAnchor">
<h2>About<a href="case-study-kinneret---old.html#about" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Lake Kinneret is a freshwater lake (32 ºN, 35 ºE) situated in northern Israel, and is the lowest freshwater lake in the world (209m below Mediterranean Sea Level). The lake has a surface area of 173 km<sup>2</sup>, and is about 49 m deep. The model is set-up to simulate the hydrological domain of Lake Kinneret for 2 years, from 1997-01-01 to 1999-01-01 (<code>&amp;time</code>), with water balance and heat fluxes hypothetically calculated based on the lake configuration and input data. Water quality functionality (AED2) is disabled for the simulation (<code>&amp;wq_setup</code>).</p>
<center>
<img src="images/09-module8/picture1.jpg" width="100%" />
</center>
<p>The <em>Kinneret97</em> model simulation above has the ecological model aed2 enabled. It has been pre-configured to run the customizable <a href="http://aquatic.science.uwa.edu.au/research/models/AED/modules.html">AED modules</a>. These are separate models, but have been set up to run side by side. They are configured using the text file <code>aed2.nml</code>.</p>
</div>
<div id="exercises" class="section level2 unnumbered hasAnchor">
<h2>Exercises<a href="case-study-kinneret---old.html#exercises" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Begin by running the model as-is. If you’re not sure how to do this, read the <a href="running-glm.html#running-glm">Getting Started</a> page.</p>

<div class="rmdnote2">
<p>This simulation was only plotting temperature and salinity and these plots were configured in <code>plots.nml</code>. Open <code>plots.nml</code> to see how you can customise the graphs. There are many other variables we may be interested in plotting when we run the watter quality model such as oxygen, nutrients, and algae. A pre-configured file called <code>plots_aed2.nml</code> has been created. To use this file, rename it to <code>plots.nml</code> (you’ll first need to rename the existing <code>plots.nml</code>) and run the model. You should now see more outputs for the lake simulation.</p>
</div>

<p>In <code>plots.nml</code> the required variables are all listed, make sure the number of plots is high enough to include them all.</p>
<center>
<div style="border: 1px solid #ddd; padding: 5px; overflow-y: scroll; height:250px; overflow-x: scroll; width:100%; ">
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:table06-1">Table 8.1: </span>Water quality variables and their descriptions.
</caption>
<thead>
<tr>
<th style="text-align:center;">
Description
</th>
<th style="text-align:center;">
Variable Name
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;min-width: 25em; ">
Passive tracer
</td>
<td style="text-align:center;min-width: 25em; ">
<code>TRC_tr1</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Water age
</td>
<td style="text-align:center;min-width: 25em; ">
<code>TRC_age</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Suspended solids
</td>
<td style="text-align:center;min-width: 25em; ">
<code>NCS_ss1</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Dissolved oxygen
</td>
<td style="text-align:center;min-width: 25em; ">
<code>OXY_oxy</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Dissolved inorganic carbon
</td>
<td style="text-align:center;min-width: 25em; ">
<code>CAR_dic</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
pH
</td>
<td style="text-align:center;min-width: 25em; ">
<code>CAR_pH</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Methane (dissolved)
</td>
<td style="text-align:center;min-width: 25em; ">
<code>CAR_ch4</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Methane (bubbles)
</td>
<td style="text-align:center;min-width: 25em; ">
<code>CAR_ch4_bub</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Reactive Silica
</td>
<td style="text-align:center;min-width: 25em; ">
<code>SIL_rsi</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Ammonium
</td>
<td style="text-align:center;min-width: 25em; ">
<code>NIT_amm</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Nitrate/Nitrite
</td>
<td style="text-align:center;min-width: 25em; ">
<code>NIT_nit</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Phosphate
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHS_frp</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Particulate inorganic phosphorus
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHS_frp_ads</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Dissolved organic carbon
</td>
<td style="text-align:center;min-width: 25em; ">
<code>OGM_doc</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Particualte organic carbon
</td>
<td style="text-align:center;min-width: 25em; ">
<code>OGM_poc</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Dissolved organic nitrogen
</td>
<td style="text-align:center;min-width: 25em; ">
<code>OGM_don</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Particulate organic nitrogen
</td>
<td style="text-align:center;min-width: 25em; ">
<code>OGM_pon</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Dissolved organic phosphorus
</td>
<td style="text-align:center;min-width: 25em; ">
<code>OGM_dop</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Particulate organic phsophorus
</td>
<td style="text-align:center;min-width: 25em; ">
<code>OGM_pop</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Green algae
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_green</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Green algae
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_green_IN</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Green algae
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_green_IP</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Diatoms
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_diatom</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Diatoms
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_diatom_IN</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Diatoms
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_diatom_IP</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Cyrptophytes
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_crypto</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Cyrptophytes
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_crypto_IN</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Cyrptophytes
</td>
<td style="text-align:center;min-width: 25em; ">
<code>PHY_crypto_IP</code>
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 25em; ">
Zooplankton
</td>
<td style="text-align:center;min-width: 25em; ">
<code>ZOO_zoo01</code>
</td>
</tr>
</tbody>
</table>
</div>
</center>
<p><br></p>
<p>Let’s also now add water quality variables to the specific depth output files (i.e. <code>WQ_5.csv</code>). To do so we must edit the output section of the <code>glm3.nml</code> file, by adding the variables as extra columns to the <code>.csv</code> file that were configured above.</p>

<div class="rmdtip2">
If they are there already, make sure that the number of variables is high enough to include them all.
</div>

<style>
ol > li > ol > li {list-style-type:lower-alpha}
</style>
<ol start="1">
<li>
<ol>
<li>
As an example to output water quality variables, let’s plot all the nitrogen variables. Change <code>csv_point_vars</code> to include <code>NIT_amm</code>, <code>NIT_nit</code>, <code>OGM_don</code>, <code>OGM_pon</code>, <code>PHY_green_IN</code> - these are all the variables that contribute to the total nitrogen (TN) pool. Now re-run the model (e.g. Windows users double clicking <code>glm.bat</code> again). Once it’s run open <code>WQ_35.csv</code> to see these new variables and create a stacked area plot to show how the different variables contribute to TN.
</li>
<li>
Create a well formatted, interesting graph of variables of your choice (for example, you may like to consider all of the phytoplankton groups or create sums of these to generate a NPZD model) to see how they interact and change over time. If any variables are much bigger or smaller than the others, then use two y-axes or multiple plots.
</li>
</ol>
</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>How would these concentrations change if the air temperature increased by 2°C? (You will need to edit the <code>met_hourly.csv</code> file). Make sure to save with correct date format, taking note these met measurements are recorded hourly, so YYYY-MM-DD hh:mm. A pre-made version of this file can be found in <em>bcs</em> which is called <code>met_1997_2004_airT2.csv</code>. To use this file, update <code>meteo_fl = 'bcs/met_1997_2004.csv'</code> in the <code>&amp;meteorology</code> section of <code>glm3.nml</code>.</li>
</ol>
<style type="text/css">
.codeScroll {
  overflow-y: scroll; 
   height:450px;
}
</style>
<div class="sourceCode" id="cb2"><pre class="sourceCode fortran codeScroll"><code class="sourceCode fortran"><a class="sourceLine" id="cb2-1" title="1"><span class="co">!-------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">! meteorology</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">!-------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">&amp;</span>meteorology</a>
<a class="sourceLine" id="cb2-5" title="5">   met_sw      <span class="kw">=</span> <span class="cn">.true.</span></a>
<a class="sourceLine" id="cb2-6" title="6">   lw_<span class="dt">type</span>     <span class="kw">=</span> <span class="st">&#39;LW_IN&#39;</span></a>
<a class="sourceLine" id="cb2-7" title="7">   rain_sw     <span class="kw">=</span> <span class="cn">.false.</span></a>
<a class="sourceLine" id="cb2-8" title="8">   atm_stab    <span class="kw">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb2-9" title="9">   fetch_mode  <span class="kw">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="co">!rad_mode    = 1</span></a>
<a class="sourceLine" id="cb2-11" title="11">   albedo_mode <span class="kw">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb2-12" title="12">   cloud_mode  <span class="kw">=</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb2-13" title="13">   <span class="co">!-- BC file details</span></a>
<a class="sourceLine" id="cb2-14" title="14">   subdaily    <span class="kw">=</span> <span class="cn">.true.</span></a>
<a class="sourceLine" id="cb2-15" title="15">   meteo_fl    <span class="kw">=</span> <span class="st">&#39;bcs/met_1997_2004.csv&#39;</span> <span class="co">!&lt;------- Update this</span></a>
<a class="sourceLine" id="cb2-16" title="16">   wind_factor <span class="kw">=</span> <span class="fl">0.9</span></a>
<a class="sourceLine" id="cb2-17" title="17">   lw_factor   <span class="kw">=</span> <span class="fl">1.0</span></a>
<a class="sourceLine" id="cb2-18" title="18">   lw_offset   <span class="kw">=</span> <span class="fl">0.0</span></a>
<a class="sourceLine" id="cb2-19" title="19">   <span class="co">!-- Parameters</span></a>
<a class="sourceLine" id="cb2-20" title="20">   ce <span class="kw">=</span> <span class="fl">0.0013</span></a>
<a class="sourceLine" id="cb2-21" title="21">   ch <span class="kw">=</span> <span class="fl">0.0013</span></a>
<a class="sourceLine" id="cb2-22" title="22">   cd  <span class="kw">=</span> <span class="fl">0.0013</span></a>
<a class="sourceLine" id="cb2-23" title="23">  <span class="co">!catchrain      = .true.</span></a>
<a class="sourceLine" id="cb2-24" title="24">  <span class="co">!rain_threshold = 0.001</span></a>
<a class="sourceLine" id="cb2-25" title="25">  <span class="co">!runoff_coef    = 0.0</span></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="kw">/</span></a></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>What happens if we change the water clarity? Increase and decrease from the original value to see the response</li>
</ol>

<div class="rmdtip2">
You must change the light extinction coefficient <code>Kw</code> (range 0-1) in the <code>glm3.nml</code> file.
</div>

</div>
<div id="error-assessment-1" class="section level2 unnumbered hasAnchor">
<h2>Error Assessment<a href="case-study-kinneret---old.html#error-assessment-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol start="4" style="list-style-type: decimal">
<li>Calculate the mean absolute error in the simulation using the observed temperature data (<code>ObservedTempData.xlsx</code> from the <em>data</em> folder in <em>Kinneret97</em>) and the simulated temperature data (the simulated temperature data is from the surface layer in <code>lake.csv</code>).</li>
</ol>
<style>
ol > li > ol > li {list-style-type:lower-alpha}
</style>
<ol start="5">
<li>
<ol>
<li>
Calculate the sensitivity of the modelled temperature to changes in water clarity (the light extinction coefficient, <span class="math inline">\(K_w\)</span>) and wind speed (<code>wind_factor</code>). These can be found in <code>glm3.nml</code>. Try increasing and decreasing the default parameter value by 0.2 and see how much the output changes.
</li>
<li>
Assess how sensitive the temperature and phytoplankton biomass is to water clarity:
</li>
<br>
<center>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
GLM results
</th>
<th style="text-align:center;">
Water clarity Decrease 0.37
</th>
<th style="text-align:center;">
Water clarity Original 0.57
</th>
<th style="text-align:center;">
Water clarity Increase 0.77
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;min-width: 10em; ">
Average WQ_35 temperature
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 10em; ">
Average WQ_35 phytoplankton (green, crypto, diatom) biomass
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
</tr>
</tbody>
</table>
</div>
</center>
<br>
<li>
Assess how sensitive the temperature and phytoplankton biomass is to wind speed:
</li>
<br>
<center>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
GLM results
</th>
<th style="text-align:center;">
Wind Speed Decrease 0.6
</th>
<th style="text-align:center;">
Wind Speed Original 0.9
</th>
<th style="text-align:center;">
Wind Speed Increase 1.2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;min-width: 10em; ">
Average WQ_35 temperature
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
</tr>
<tr>
<td style="text-align:center;min-width: 10em; ">
Average WQ_35 phytoplankton (green, crypto, diatom) biomass
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
<td style="text-align:center;min-width: 10em; ">
</td>
</tr>
</tbody>
</table>
</div>
</center>
</ol>
</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="processing-outputs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="case-study-darwin---old.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["GLM Module Resources.zip", "GLM Module Resources"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
