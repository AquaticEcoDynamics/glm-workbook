<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 2: Configuring Model Parameters | GLM Workbook</title>
  <meta name="description" content="The Online GLM Workbook" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 2: Configuring Model Parameters | GLM Workbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The Online GLM Workbook" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 2: Configuring Model Parameters | GLM Workbook" />
  
  <meta name="twitter:description" content="The Online GLM Workbook" />
  

<meta name="author" content="Matt Hipsey, Giles Knight, Casper Boon, Dan Paraska" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="C02-1.html"/>
<link rel="next" href="C04-1.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="https://hypothes.is/embed.js" async></script>
  


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>GLM Workbook</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html"><i class="fa fa-check"></i>Getting Started</a>
<ul>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#excel"><i class="fa fa-check"></i>Excel</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#unzipping-files"><i class="fa fa-check"></i>Unzipping files</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html"><i class="fa fa-check"></i>Module 1: Getting Started with GLM</a>
<ul>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html#C02_2"><i class="fa fa-check"></i>Module Resources</a></li>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html#C02_3"><i class="fa fa-check"></i>Setting up GLM</a></li>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html#C02_7"><i class="fa fa-check"></i>Anatomy of a Simulation</a></li>
<li class="chapter" data-level="" data-path="C02-1.html"><a href="C02-1.html#C02_8"><i class="fa fa-check"></i>Exercise: Lake-scale Water &amp; Heat Balance</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="C03-1.html"><a href="C03-1.html"><i class="fa fa-check"></i>Module 2: Configuring Model Parameters</a>
<ul>
<li class="chapter" data-level="" data-path="C03-1.html"><a href="C03-1.html#C03_2"><i class="fa fa-check"></i>Getting Familiar with the .nml</a></li>
<li class="chapter" data-level="" data-path="C03-1.html"><a href="C03-1.html#C03_3"><i class="fa fa-check"></i>Exercise: Adding Output Points</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="C04-1.html"><a href="C04-1.html"><i class="fa fa-check"></i>Module 3: The Ecosystem Model</a></li>
<li class="chapter" data-level="" data-path="C05-1.html"><a href="C05-1.html"><i class="fa fa-check"></i>Module 4: Assessing Error &amp; Sensitivity</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GLM Workbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="C03_1" class="section level1 unnumbered">
<h1>Module 2: Configuring Model Parameters</h1>
<div id="C03_2" class="section level3 unnumbered">
<h3>Getting Familiar with the .nml</h3>
<p>To configure the model, open the <code>glm3.nml</code> file in the <em>Kinneret97</em> directory with a text editor. A chunk of this <code>.nml</code> file is shown below. For example, if you wanted to change the maximum number of lake layers the model simulates, you would change <code>max_layers = 500</code>.</p>

<div class="rmdnote2">
The easiest way to edit the <code>glm3.nml</code> file is with the Atom text editor. You can download it <a href="https://atom.io">here</a>.
</div>
<pre style="max-height: 400px;"><code>!------------------------------------------------------------------------------!
!                                                                              !
!          .----------------.  .----------------.  .----------------.          !
!          | .--------------. || .--------------. || .--------------. |        !
!          | |    ______    | || |   _____      | || | ____    ____ | |        !
!          | |  .&#39; ___  |   | || |  |_   _|     | || ||_   \  /   _|| |        !
!          | | / .&#39;   \_|   | || |    | |       | || |  |   \/   |  | |        !
!          | | | |    ____  | || |    | |   _   | || |  | |\  /| |  | |        !
!          | | \ `.___]  _| | || |   _| |__/ |  | || | _| |_\/_| |_ | |        !
!          | |  `._____.&#39;   | || |  |________|  | || ||_____||_____|| |        !
!          | |              | || |              | || |              | |        !
!          | &#39;--------------&#39; || &#39;--------------&#39; || &#39;--------------&#39; |        !
!          &#39;----------------&#39;  &#39;----------------&#39;  &#39;----------------&#39;          !
!                                                                              !
!-------------------------------------------------------------------------------

!-------------------------------------------------------------------------------
! general model setup
!-------------------------------------------------------------------------------
&amp;glm_setup
   sim_name = &#39;Example Kinneret GLM Simulation&#39;
   max_layers = 500
   min_layer_vol = 0.025
   min_layer_thick = 0.15
   max_layer_thick = 1.50
   density_model = 1
/</code></pre>
</div>
<div id="C03_3" class="section level3 unnumbered">
<h3>Exercise: Adding Output Points</h3>
<ol style="list-style-type: decimal">
<li>Go to the <code>&amp;output</code> section of <code>glm3.nml</code> and customize the configuration to make two output files, one at 5m from the bottom (ie. in the lake hypolimnion) and one at 35m from the bottom (ie. in the lake epilimnion). This create two <code>.csv</code> files (<code>WQ_5.csv</code> and <code>WQ_35.csv</code>) with conditions at these water depths. Plot the temperate of the two layers in excel. Identify the periods where the lake is stratified and mixed.</li>
</ol>
<pre style="max-height: 239px;"><code>!-------------------------------------------------------------------------------
! format for output and filename(s)
!-------------------------------------------------------------------------------
&amp;output
   out_dir = &#39;output&#39;
   out_fn  = &#39;output&#39;
   nsave = 6  !This will output every 6 hours
   ! General summary file
   csv_lake_fname = &#39;lake&#39;
   ! Depth specific outputs
   csv_point_nlevs = 2 
   csv_point_fname = &#39;WQ_&#39;
   csv_point_at = 5.,35.
   csv_point_nvars = 4
   csv_point_vars = &#39;temp&#39;,&#39;salt&#39;,&#39;PHS_frp&#39;,&#39;NIT_amm&#39;
/</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Assess how the degree of stratification changes as the initial water level of the lake is reduced by 20m. To do this change the initial starting lake depth and profile details in <code>glm3.nml</code>.</li>
</ol>

<div class="rmdtip2">
You will need to update the output depth of your surface output file.
</div>

<div class="rmdtip2">
For future activities make sure you change back to 43m.
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="C02-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="C04-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["GLM Module Resources.zip", "GLM Module Resources"]],
"toc": {
"collapse": "none"
},
"search": true,
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
